<html>
    <head>

        <title>Turing Drawings</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
        <meta http-equiv="encoding" content="utf-8">
        <meta name="keywords" content="javascript, html5, canvas, Alan Turing, Turing machine, drawing, evolutionary">
        <meta name="description" content="">
        <script language="javascript" src="utils-html.js"></script>
        <script language="javascript" src="utils-misc.js"></script>
        <script language="javascript" src="slider.js"></script>
        <script language="javascript" src="stepper.js"></script>
        <script language="javascript" src="main.js"></script>
        <script language="javascript" src="programs.js"></script>
        <!-- OPTIONAL: Variant Explorer - DELETE NEXT LINE TO REMOVE -->
        <script language="javascript" src="variants.js"></script>
        <!-- OPTIONAL: Auto Paint - DELETE NEXT LINE TO REMOVE -->
        <script language="javascript" src="autopaint.js"></script>

        <link rel=stylesheet href="stylesheet.css" type="text/css">
        <link rel=stylesheet href="slider.css" type="text/css">
        <link rel=stylesheet href="stepper.css" type="text/css">
        <!-- OPTIONAL: Variant Explorer - DELETE NEXT LINE TO REMOVE -->
        <link rel=stylesheet href="variants.css" type="text/css">

    </head>
    <body>

        <style>
        #forkme { position: absolute; top: 0; right: 0; border: 0 }
        @media screen and (max-width: 1000px) { #forkme { display: none } }
        
        .transition-table {
            border-collapse: collapse;
            margin: 0 auto;
        }
        
        .transition-table th, .transition-table td {
            border: 1px solid #ccc;
            padding: 4px;
            text-align: center;
        }
        
        .transition-table th {
            background-color: #464646;
            font-weight: bold;
        }
        
        .transition-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
        }
        
        .cell-state, .cell-arrow {
            cursor: pointer;
            padding: 2px 4px;
            border-radius: 3px;
            user-select: none;
        }
        
        .cell-state:hover, .cell-arrow:hover {
            background-color: #e0e0e0;
        }
        
        .cell-symbol {
            width: 16px;
            height: 16px;
            border: 1px solid #000;
            cursor: pointer;
            display: inline-block;
        }
        
        .cell-symbol:hover {
            border: 2px solid #000;
            margin: -1px;
        }
        
        .active-cell {
            background-color: #ffeb3b !important;
        }
        </style>
        <!-- <a id="forkme" href="https://github.com/maximecb/Turing-Drawings">
        <img src="forkme.png" alt="Fork me on GitHub">
        </a> -->

        <h1 class="title">
        <a href="#">Interactive Turing</a>
        </h1>

        <div class="main-container">
            <!-- canvas section -->
            <div class="canvas-section">
                <div class="canvas_frame">
                    <canvas id="canvas">
                        Your browser does not support the canvas element.
                    </canvas>
                </div>
            
            </div>

            <!-- OPTIONAL: Variant Explorer - DELETE FROM HERE TO 'END OPTIONAL' TO REMOVE -->
            <!-- Variant panel (shown by default) -->
            <div id="variantPanel" style="display: block;">
                <div class="control-group" style="margin-bottom: 8px; margin-top: 12px;">
                    <button type="button" onclick="generateVariants();" title="Generate new variants">↻ Generate Variants (V)</button>
                    <button type="button" id="hideVariantsBtn" onclick="toggleVariantExplorer();" title="Hide variant explorer">Hide Variants</button>
                </div>
                <div style="text-align: center; font-size: 0.85em; margin-bottom: 6px; color: #888;">
                    <strong>Mutation Filters:</strong> Click to show/hide variant types
                </div>
                <div class="control-group" style="margin-bottom: 8px; flex-wrap: wrap; justify-content: center; max-width: 512px; margin-left: auto; margin-right: auto;">
                    <button type="button" id="filterFullRandomBtn" class="toggle-button active" onclick="toggleMutationFilter('fullRandom');" title="Filter: full random mutations" style="padding: 4px 8px; font-size: 0.8em; min-height: auto;">Full Random</button>
                    <button type="button" id="filterStatesBtn" class="toggle-button active" onclick="toggleMutationFilter('states');" title="Filter: randomize states" style="padding: 4px 8px; font-size: 0.8em; min-height: auto;">States (S)</button>
                    <button type="button" id="filterColorsBtn" class="toggle-button active" onclick="toggleMutationFilter('colors');" title="Filter: randomize colors" style="padding: 4px 8px; font-size: 0.8em; min-height: auto;">Colors (C)</button>
                    <button type="button" id="filterArrowsBtn" class="toggle-button active" onclick="toggleMutationFilter('arrows');" title="Filter: randomize arrows" style="padding: 4px 8px; font-size: 0.8em; min-height: auto;">Arrows (A)</button>
                    <button type="button" id="filterRotateBtn" class="toggle-button active" onclick="toggleMutationFilter('rotate');" title="Filter: rotate arrows" style="padding: 4px 8px; font-size: 0.8em; min-height: auto;">Rotate (R)</button>
                    <button type="button" id="filterGlitchLightBtn" class="toggle-button active" onclick="toggleMutationFilter('glitchLight');" title="Filter: light mutations" style="padding: 4px 8px; font-size: 0.8em; min-height: auto;">Light (M)</button>
                    <button type="button" id="filterGlitchHeavyBtn" class="toggle-button active" onclick="toggleMutationFilter('glitchHeavy');" title="Filter: heavy mutations" style="padding: 4px 8px; font-size: 0.8em; min-height: auto;">Heavy (⇧M)</button>
                    <button type="button" onclick="showAllMutationTypes();" title="Activate all mutation filters" style="background-color: #4CAF50; color: white; padding: 4px 8px; font-size: 0.8em; min-height: auto; margin-left: 4px;">Show All</button>
                </div>
                <div style="text-align: center; font-size: 0.85em; margin-bottom: 4px; color: #aaa;">
                    Click a variant to apply it
                </div>
                <div id="variantContainer"></div>
            </div>
            <!-- END OPTIONAL: Variant Explorer -->

            <!-- controls section -->
            <div class="controls-section">
                <form name="params" action="">
                
                    <!-- Transition table -->
                    <div style="margin-top:8px; margin-bottom:8px;">
                        <div style="margin-bottom:4px; font-weight: bold; font-size: 0.9em; text-align: center;">
                            <span>Transition Table (<span id="tableNumberDisplay">v0</span>)</span>
                        </div>
                        <div id="transitionTable" style="font-size: 0.85em; overflow-x: auto; max-width: 512px; margin: 0 auto;"></div>
                        <div style="margin-top:4px; display: flex; align-items: center; justify-content: center; gap: 8px;">
                            <button id="historyPrev" type="button" onclick="historyUndo();" style="padding: 2px 8px;" disabled>&lt; undo</button>
                            <button id="historyNext" type="button" onclick="historyRedo();" style="padding: 2px 8px;" disabled>redo &gt;</button>
                        </div>
                    </div>

                    <div class="button-controls" style="margin-top:8px; margin-bottom:8px;">
                        <!-- Instant mutation -->
                        <div class="control-group">
                            <strong>Instant Mutation:</strong>
                            <button type="button" onclick="glitchRandomizeAll();" title="Instantly randomize the entire transition table" style="background-color: #2196F3; color: white; font-weight: bold;">Full Random (Space)</button>
                        </div>

                        <!-- Drawing controls -->
                        <div class="control-group">
                            <strong>Cursor color:</strong>
                            <span id="colorButtonsContainer"></span>
                            <button type="button" id="randomColorBtn" onclick="setCursorColor(9);" title="Random color" style="padding: 0; width: 28px; height: 28px; min-height: 28px; position: relative; overflow: hidden; border: 2px solid white;">
                                <canvas id="randomColorCanvas" width="28" height="28" style="display: block; width: 28px; height: 28px;"></canvas>
                                <span style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000; font-weight: bold; font-size: 11px; z-index: 1;">9</span>
                            </button>
                        </div>
                        
                        <!-- Steppers for speed and size -->
                        <div class="control-group" id="speedSizeSliders" style="gap: 8px;">
                            <!-- Speed and size steppers will be inserted here -->
                        </div>
                        

                        <!-- Settings -->
                        <div class="control-group" id="steppersContainer" style="gap: 8px;">
                            <!-- Steppers will be inserted here by JavaScript -->
                        </div>
                        
                        <!-- OPTIONAL: Auto Paint - DELETE FROM HERE TO 'END OPTIONAL' TO REMOVE -->
                        <div class="control-group">
                            <button type="button" id="autoPaintBtn" onclick="toggleAutoPaint();" class="toggle-button" title="Cycle: OFF → 10% → 100%">Auto-paint: OFF</button>
                            <select id="autoPaintMode" onchange="setAutoPaintMode(this.value);" title="Select auto-paint mode" style="padding: 4px; font-size: 0.9em;">
                                <option value="momentum">Momentum</option>
                                <option value="teleport">Teleport</option>
                                <option value="circle">Circle</option>
                                <option value="noise">Smooth Noise</option>
                            </select>
                        </div>
                        <!-- END OPTIONAL: Auto Paint -->
                        
                        <!-- Bottom controls -->
                        <div class="control-group">
                            <button type="button" id="autoRestartBtn" onclick="toggleAutoRestart();" class="toggle-button active" title="Toggle auto-restart">Auto-restart: ON</button>
                            <button type="button" onclick="restartProg();">Restart (Esc)</button>
                            <button type="button" onclick="resetProgram();" style="background-color: #d32f2f; color: white;">RESET</button>
                        </div>
                        
                        <!-- Share and Variants -->
                        <!-- OPTIONAL: Variant Explorer - DELETE FROM HERE TO 'END OPTIONAL' TO REMOVE -->
                        <div class="control-group">
                            <button type="button" id="shareButton" onclick="shareDrawing();" title="Copy shareable URL for this drawing">Share Drawing</button>
                            <button type="button" id="variantExplorerBtn" onclick="toggleVariantExplorer();" class="toggle-button" title="Show mutation variants" style="display: none;">Show Variants</button>
                        </div>
                        <!-- END OPTIONAL: Variant Explorer -->
                    </div>

                    <div class="description-text" style="margin-top:16px; margin-bottom:16px; text-align: justify; font-size: 0.9em;">
                    Turing Drawings uses randomly generated Turing machines to produce
                    drawings on a canvas, as a form of generative art. The typical
                    Turing machine formulation manipulates symbols on a one-dimensional
                    tape. Turing Drawings uses machines that operate on a finite 2D grid,
                    where each grid cell can contain one symbol which corresponds to a
                    color value. This 2D grid is represented in the canvas, which is
                    dynamically updated as the Turing machine iterates.
                    <br><br>
                    <strong>Interactive Features:</strong> Click or drag on the canvas to paint
                    directly onto the grid. Modify the transition table by clicking on individual
                    cells to cycle through states, symbols, and movement directions. Use the
                    "Glitch" and "Randomize" buttons to introduce controlled mutations, or press
                    "Random" to generate entirely new machines. The transition table shows the
                    current active cell as the machine runs, and includes undo/redo history
                    to explore different variations.
                    <br><br>
                    Share your creations using the "Share Drawing" button, which copies a URL
                    containing your exact transition table configuration. Adjust simulation speed,
                    cursor size, and machine complexity (states/symbols) using the control steppers.
                    </div>

                </form>
            </div>
        </div>

        <div class="copyright">
            Original implementation by Maxime Chevalier-Boisvert  © 2012 (<a href="https://github.com/maximecb/Turing-Drawings">source</a>, <a href="https://maximecb.github.io/Turing-Drawings/">live demo</a>)
            <br>
            Forked and extended with interactive features by Gabriel Huang © 2025 (<a href="https://github.com/gabrielhuang/Turing-Drawings">source</a>, <a href="https://gabrielhuang.github.io/Turing-Drawings/">live demo</a>)
        </div>

    </body>
</html>
